<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}

<!-- javascript funciton that on submit, takes the text from the code editor ans submits is as the answer -->    

    <div class="jumbotron">
        <h1 class="text-center">Add A Question</h1>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="margin-15">
                <form action="/make" method="post" class="form-inline text-center">
                    <div class="form-box">
                        <div class="box-name">
                            <strong class="text-left">
                                Topic
                            </strong>
                        </div>
                        <div style="display: block;">
                            <select id="new-box" class="form-control" name="topic_id">
                            <option value="" disabled selected>Select your option</option>
                            {% for topic in topics %}
                                <option value={{topic.id}}>
                                    {{ topic.name }}
                                </option>
                            {% endfor %}
                            </select>
                        </div>


                        <div class="box-name" style="margin-top: 2%;">
                            <strong class="text-left">
                                Language
                            </strong>
                        </div>
                        <div style="display: block;">
                            <select onchange="set_lang();" id="language" class="form-control" name="language">
                            <option value="" disabled selected>Select your option</option>
                            {% for l in languages %}
                                <option>
                                    {{ l }}
                                </option>
                            {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-box">
                        <div class="box-name">
                            <strong class="text-left">
                                Question
                            </strong>
                        </div>
                        <div style="display: block;">
                            <textarea id="new-box" class="form-control" type="text" name="question" rows="5"></textarea>
                        </div>
                    </div>
                    <div class="form-box">
                        <div class="box-name">
                            <strong class="text-left">
                                Hint
                            </strong>
                        </div>
                        <div style="display: block;">
                            <textarea id="new-box" class="form-control" type="text" name="hint"></textarea>
                        </div>
                    </div>
                    <div>
                        <div class="box-name">
                            <strong class="text-left">
                                Answer
                            </strong>
                        </div>
                        <div id="editor-border" class="editor-border new-box">
                            <div id="editor" class="editor text-left"></div>
                        </div>
                    </div>
                    <input type="hidden" name="answer" value="get_code();">
                    <button class="new-qs-btn btn btn-lg btn-primary" type="submit" value="Submit" style="width: 100%; margin">Submit</button>
                </form>

            </div>
        </div>
    </div>

    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/clouds");
        // let the user choose language, and set it

        var set_lang = function() {
            var select = document.getElementById("language");
            var lang = select.options[select.selectedIndex].text;
            console.log(lang)
            editor.getSession().setMode("ace/mode/" + lang);
        }
      

        var get_code = function(){
            var val= editor.getValue();
            document.getElementById("test").innerHTML = val;
        }

        window.onresize = editor.resize();
  </script>
{% endblock %}
